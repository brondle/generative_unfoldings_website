<!DOCTYPE html><html><head><title>Generative Unfoldings</title><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.b4fa1c7c986c617ba9d8.css">@font-face{font-family:latoHairline;src:url(/assets/Lato-Hairline/lato/Lato-Hairline.ttf)}body,html{font-family:Helvetica Neue,Helvetica,sans-serif;font-weight:200;background-color:#f5f5f5;min-height:100vh;max-width:100%;padding:0;margin:0}#___gatsby{max-width:100%;margin:0 0 48px}img{color:#f5f5f5}h1{font-size:24px}h2{font-size:18px;font-weight:400}p{font-size:14px}.accessibility-tag{font-size:0;width:1px;height:1px;display:inline-block;overflow:hidden;position:absolute!important;border:0!important;padding:0!important;margin:0!important;clip:rect(1px,1px,1px,1px)}.layout{margin:0 auto;display:flex}.header,.website-content,.work,iframe{width:100vw;max-width:100%;text-align:center;justify-content:center;margin:0 auto}.iframe-container{display:grid;grid-template-columns:1fr}iframe{margin-top:6px;width:76vw;max-width:76vw;height:69vh;resize:both;grid-row-start:1;grid-column-start:1;border:none}iframe:-webkit-full-screen{background-color:#f5f5f5;max-width:100vw;max-height:100vh;height:100vh}iframe:-ms-fullscreen{background-color:#f5f5f5;max-width:100vw;max-height:100vh;height:100vh}iframe:fullscreen{background-color:#f5f5f5;max-width:100vw;max-height:100vh;height:100vh}iframe.large{height:96vh;width:92vw;max-width:92vw}button.fullscreen{grid-row-start:1;grid-column-start:1;border:none;background:none;z-index:100000;margin-right:12vw;justify-self:end;align-self:end;width:5vw;transition:transform .2s}button.fullscreen svg{stroke:#fff}button.fullscreen:hover{cursor:pointer;transform:scale(1.2)}.header:not(.work-header){margin:24px 0 0}.header{width:100vw;max-width:100%;padding:0 0 12px;background-color:hsla(0,0%,96.1%,.65);text-align:center;display:grid;grid-template-columns:repeat(2,1fr)}.header h1{margin:0 auto}.header div{align-self:start}.header .exhibit-info{margin-left:15vw;justify-self:start;width:50vw;text-align:left}.header .exhibit-info p{margin-top:18px}.header .mit-info{margin-right:15vw;width:20vw;margin-top:1.2vw;justify-self:end;text-align:right}.header img{margin-top:12px}.header .exhibit-logo{max-width:45vw;width:45vw;min-height:4vw;height:auto}.header .mit-logo{width:10vw;height:auto}.header.work .exhibit-logo{max-width:30vw;min-height:3vw;width:30vw}.header.work .mit-logo{width:7vw}.header p{margin:0 auto 12px;max-width:70vw}.header a:visited,.header h1 a{text-decoration:none;color:#000!important;outline:none}.header.closed{width:40px;height:0;padding-top:30px;position:absolute;border:1px solid #ebebeb;margin:0;right:0}.header.closed :not(.icon-show-hide){display:none}.header .icon-show-hide{width:40px;z-index:100000;height:0;background:hsla(0,0%,96.1%,.65) 10px 10px/20px 20px no-repeat;padding-top:40px;display:block;overflow:hidden;position:absolute;top:0;right:0}.header .icon-show-hide.hide-header{background-image:linear-gradient(45deg,transparent 13px,#ccc 0,#ccc 15px,transparent 0),linear-gradient(-45deg,hsla(0,0%,96.1%,.65) 13px,#ccc 0,#ccc 15px,hsla(0,0%,96.1%,.65) 0)}.header .icon-show-hide.show-header{background-image:-webkit-repeating-linear-gradient(#ccc,#ccc 2px,hsla(0,0%,96.1%,.65) 0,hsla(0,0%,96.1%,.65) 4px);background-image:repeating-linear-gradient(#ccc,#ccc 2px,hsla(0,0%,96.1%,.65) 0,#fff 4px)}.mobile-disclaimer{display:none}.work-header{display:grid;max-height:8vh;grid-template-columns:repeat(3,1fr);align-items:center;margin:0 auto}.work-header.closed{width:0;height:0}.work-header *{display:flex;align-items:center;justify-content:center}.work-header .previous{height:100%;align-self:start;text-align:left}.work-header .info{height:100%;align-self:start;flex-flow:column nowrap;font-size:12px}.work-header .info h1{font-weight:200;font-size:18px}.work-header .info h2,.work-header .info h2 a{font-weight:200;font-size:14px}.work-header .info *{margin:3px auto}.work-header .info a{color:#000}.work-header .next,.work-header .previous{font-size:12px}.work-header .next{height:100%;align-self:end;text-align:right}.about,.menu{box-sizing:border-box;margin:0 15vw;width:70vw;align-items:center;display:flex;flex-wrap:wrap}.menu{margin:24px 15vw;justify-content:space-between;align-items:flex-start}.about{text-align:left;margin-left:15vw;width:50vw;padding:0}.about a{color:#000}.about h3{font-weight:200}.about ul{margin:0;padding:0;list-style-type:none}.about ul a{color:#000;font-size:15px}.about ul br{margin:3px auto}.about .artistBio{text-decoration:none}.menu .menu-item,.menu div{display:flex;flex-direction:column;align-content:flex-start;margin:0 0 24px;width:20vw;height:24vw;font-size:14px;text-align:center;-o-object-fit:cover;object-fit:cover}.menu .menu-item:last-of-type,.menu div:last-of-type{align-self:flex-start}.menu .menu-item a,.menu div a{text-decoration:none;flex-grow:1;font-size:18px}.menu .menu-item img.preview-image,.menu div img.preview-image{flex-grow:1;-o-object-fit:cover;object-fit:cover;width:20vw;height:20vw;margin:6px auto}.menu .menu-item p,.menu div p{margin-top:4px}.footer{display:flex;height:44.4px;width:100vw;max-width:100%;background-color:#f5f5f5;bottom:0;justify-content:center;align-items:center;position:fixed;border-top:1px solid #ebebeb}.footer .footer-content{text-align:right;width:70vw}.footer a{margin:24px 0 24px 24px;text-decoration:none;color:#000}.footer.closed{display:none}@media only screen and (max-width:950px){.mobile-disclaimer{display:inherit}.header.work:not(.work-header):not(.closed){margin-top:6vw}.header h1,.header h1 a{font-size:20px}.header h2{font-size:14px}.header a,.header p{font-size:12px}.header .info h2{margin-bottom:4px}.header .info{width:65vw}.header .exhibit-info{margin-left:5vw;margin-right:2vw;width:63vw}.header .mit-info{margin-right:5vw;width:21vw}.header .mit-info .mit-logo{width:100%}.header .exhibit-logo,.header.work .exhibit-logo{width:100%;max-width:inherit}.header .exhibit-info p{width:80vw}iframe{width:95vw;max-width:95vw}.about{margin:auto 10vw;width:80vw}.menu{justify-content:space-between;width:90vw;margin:auto 5vw}.menu .menu-item,.menu div{height:55vw;width:40vw}.menu .menu-item img.preview-image,.menu div img.preview-image{height:40vw;width:40vw}.menu .menu-item a,.menu div a{font-size:14px!important}button.fullscreen,button.fullscreen svg{display:none}}</style><meta name="generator" content="Gatsby 2.26.1"/><link as="script" rel="preload" href="/webpack-runtime-989c47feb958c7471da8.js"/><link as="script" rel="preload" href="/styles-9411612e31e4f14527d1.js"/><link as="script" rel="preload" href="/framework-62e3997f8deedb325acf.js"/><link as="script" rel="preload" href="/app-59a51c0d7db796975a04.js"/><link as="script" rel="preload" href="/component---src-templates-work-js-e0164b3b8ade2f51e443.js"/><link as="fetch" rel="preload" href="/page-data/works/greed/view.html/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C1SJPBZ12Y"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-C1SJPBZ12Y');</script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="work"><div class="layout"><div class="website-content"><div><div class="header open work"><div class="exhibit-info"><h1 class="accessibility-tag"></h1><a href="/"><img class="exhibit-logo" src="/img/generativeunfoldingslogo.png" alt="the words &#x27;generative&#x27; unfoldings in a stylized sans-serif font"/></a></div><div class="mit-info"><a href="https://mit.edu"><img class="mit-logo" src="/img/mit-logo-with-spelling-design1-small-gray-lightgray.svg" alt="The logo for the Massachusetts Institute of Technology: gray rectangular blocks making up the letters MIT.."/></a></div></div><div class="header work work-header open"><div><a class="previous" href="/works/gender-generator/view.html">Previous</a></div><div class="info"><h1>Greed</h1><h2><a href="/about#Maja_Kalogera"> <!-- -->Maja Kalogera</a> </h2></div><div><a class="next" href="/works/hexells/view.html">Next</a></div></div></div></div></div> <div class="iframe-container"><iframe id="greed" allow="fullscreen" class="" srcDoc="&lt;!DOCTYPE HTML&gt;
&lt;html lang=&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;title&gt;Greed&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&quot;&gt;
		&lt;style type=&quot;text/css&quot;&gt;
			body {
				background: #000;
				color: #999;
				padding: 0;
				margin: 0;
				overflow: hidden;
				font-family: georgia;
				font-size:0.6em;
				text-align: center;
			}

			a { color: #f60; }

			#footer { position: absolute; bottom: 40px; width: 100%; }
			.h { color: #f60 }
			.c { display: inline; margin-left: 1em }

			#player-container #play-pause {
		  cursor: pointer;
		  text-indent: -999999px;
		  height:12px;
		  width: 12px;
		  padding: 5px 6px;
		  z-index: 2;
		    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMiAyNHYtMjRsMjAgMTItMjAgMTJ6Ii8+PC9zdmc+);
		    background-repeat: no-repeat!important;
		    background-position: center;
		    background-size: 12px;
		  background-color: #f60;
		}
		.play {
		  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMiAyNHYtMjRsMjAgMTItMjAgMTJ6Ii8+PC9zdmc+);
		}
		.pause {
		   background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTAgMjRoLTZ2LTI0aDZ2MjR6bTEwLTI0aC02djI0aDZ2LTI0eiIvPjwvc3ZnPg==)!important;
		}

		&lt;/style&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;


		&lt;div id=&quot;footer&quot;&gt;
			&lt;div class=&quot;c&quot;&gt;
			animate terrain: &lt;span class=&quot;h&quot;&gt;m&lt;/span&gt;
			&lt;/div&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; rendered by &lt;a href=&quot;http://threejs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;three.js&lt;/a&gt;  using
						&lt;a href=&quot;https://github.com/ashima/webgl-noise&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;simplex noise&lt;/a&gt;&lt;br/&gt;

						&lt;audio id=&quot;track&quot;&gt;
  &lt;source src=&quot;sounds/greed.mp3&quot; type=&quot;audio/mpeg&quot; /&gt;
	 &lt;source src=&quot;sounds/greed.ogg&quot; type=&quot;audio/ogg&quot; /&gt;
&lt;/audio&gt;

&lt;div id=&quot;player-container&quot;&gt;
  &lt;div id=&quot;play-pause&quot; class=&quot;play&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

			&lt;/div&gt;


		&lt;script src=&quot;build/three.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/seedrandom.min.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/controls/OrbitControls.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/BufferGeometryUtils.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/shaders/NormalMapShader.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/ShaderTerrain.js&quot;&gt;&lt;/script&gt;

		&lt;script src=&quot;js/Detector.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
var track = document.getElementById(&#x27;track&#x27;);

var controlBtn = document.getElementById(&#x27;play-pause&#x27;);

function playPause() {
    if (track.paused) {
        track.play();
        //controlBtn.textContent = &quot;Pause&quot;;
        controlBtn.className = &quot;pause&quot;;
    } else {
        track.pause();
         //controlBtn.textContent = &quot;Play&quot;;
        controlBtn.className = &quot;play&quot;;
    }
}

controlBtn.addEventListener(&quot;click&quot;, playPause);
track.addEventListener(&quot;ended&quot;, function() {
  controlBtn.className = &quot;play&quot;;
});
&lt;/script&gt;

		&lt;script id=&quot;fragmentShaderNoise&quot; type=&quot;x-shader/x-fragment&quot;&gt;

			//
			// Description : Array and textureless GLSL 3D simplex noise function.
			//      Author : Ian McEwan, Ashima Arts.
			//  Maintainer : ijm
			//     Lastmod : 20110409 (stegu)
			//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
			//               Distributed under the MIT License. See LICENSE file.
			//

			uniform float time;
			varying vec2 vUv;

			vec4 permute( vec4 x ) {

				return mod( ( ( x * 34.0 ) + 1.0 ) * x, 289.0 );

			}

			vec4 taylorInvSqrt( vec4 r ) {

				return 1.79284291400159 - 0.85373472095314 * r;

			}

			float snoise( vec3 v ) {

				const vec2 C = vec2( 1.0 / 6.0, 1.0 / 3.0 );
				const vec4 D = vec4( 0.0, 0.5, 1.0, 2.0 );

				// First corner

				vec3 i  = floor( v + dot( v, C.yyy ) );
				vec3 x0 = v - i + dot( i, C.xxx );

				// Other corners

				vec3 g = step( x0.yzx, x0.xyz );
				vec3 l = 1.0 - g;
				vec3 i1 = min( g.xyz, l.zxy );
				vec3 i2 = max( g.xyz, l.zxy );

				vec3 x1 = x0 - i1 + 1.0 * C.xxx;
				vec3 x2 = x0 - i2 + 2.0 * C.xxx;
				vec3 x3 = x0 - 1. + 3.0 * C.xxx;

				// Permutations

				i = mod( i, 289.0 );
				vec4 p = permute( permute( permute(
						 i.z + vec4( 0.0, i1.z, i2.z, 1.0 ) )
					   + i.y + vec4( 0.0, i1.y, i2.y, 1.0 ) )
					   + i.x + vec4( 0.0, i1.x, i2.x, 1.0 ) );

				// Gradients
				// ( N*N points uniformly over a square, mapped onto an octahedron.)

				float n_ = 1.0 / 7.0; // N=7

				vec3 ns = n_ * D.wyz - D.xzx;

				vec4 j = p - 49.0 * floor( p * ns.z *ns.z );  //  mod(p,N*N)

				vec4 x_ = floor( j * ns.z );
				vec4 y_ = floor( j - 7.0 * x_ );    // mod(j,N)

				vec4 x = x_ *ns.x + ns.yyyy;
				vec4 y = y_ *ns.x + ns.yyyy;
				vec4 h = 1.0 - abs( x ) - abs( y );

				vec4 b0 = vec4( x.xy, y.xy );
				vec4 b1 = vec4( x.zw, y.zw );


				vec4 s0 = floor( b0 ) * 2.0 + 1.0;
				vec4 s1 = floor( b1 ) * 2.0 + 1.0;
				vec4 sh = -step( h, vec4( 0.0 ) );

				vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
				vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

				vec3 p0 = vec3( a0.xy, h.x );
				vec3 p1 = vec3( a0.zw, h.y );
				vec3 p2 = vec3( a1.xy, h.z );
				vec3 p3 = vec3( a1.zw, h.w );

				// Normalise gradients

				vec4 norm = taylorInvSqrt( vec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) ) );
				p0 *= norm.x;
				p1 *= norm.y;
				p2 *= norm.z;
				p3 *= norm.w;

				// Mix final noise value

				vec4 m = max( 0.6 - vec4( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ), dot( x3, x3 ) ), 0.0 );
				m = m * m;
				return 42.0 * dot( m*m, vec4( dot( p0, x0 ), dot( p1, x1 ),
											  dot( p2, x2 ), dot( p3, x3 ) ) );

			}

			float surface3( vec3 coord ) {

				float n = 0.0;

				n += 1.0 * abs( snoise( coord ) );
				n += 0.5 * abs( snoise( coord * 2.0 ) );
				n += 0.25 * abs( snoise( coord * 4.0 ) );
				n += 0.125 * abs( snoise( coord * 8.0 ) );

				return n;

			}

			void main( void ) {

				vec3 coord = vec3( vUv, -time );
				float n = surface3( coord );

				gl_FragColor = vec4( vec3( n, n, n ), 1.0 );

			}

		&lt;/script&gt;


		&lt;script id=&quot;vertexShader&quot; type=&quot;x-shader/x-vertex&quot;&gt;

			varying vec2 vUv;
			uniform vec2 scale;
			uniform vec2 offset;

			void main( void ) {

				vUv = uv * scale + offset;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		&lt;/script&gt;

		&lt;script&gt;

			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

			var SCREEN_WIDTH = window.innerWidth;
			var SCREEN_HEIGHT = window.innerHeight;
			const PAGE_WIDTH = 2412;
			const PAGE_HEIGHT = 3074;
			var renderer, container, stats;

			var camera, scene, controls;
			var cameraOrtho, sceneRenderTarget;

			var uniformsNoise, uniformsNormal, uniformsTerrain,
				heightMap, normalMap,
				quadTarget;

			var directionalLight, pointLight;

			var terrain;

			var textureCounter = 0;

			var animDelta = 0, animDeltaDir = -1;
			var lightVal = 0, lightDir = 1;


			var clock = new THREE.Clock();

			var updateNoise = true;

			var animateTerrain = false;

			var mlib = {};

			const urlParams = new URLSearchParams(location.search);
			const seed = parseInt(urlParams.get(&quot;seed&quot;));
			const page = parseInt(urlParams.get(&quot;page&quot;));
			//create a random number generator with our designated seed
			const rng = new Math.seedrandom(seed);
			var randomNumber;

			init();
			animate();

			function init() {

				container = document.getElementById( &#x27;container&#x27; );


				// SCENE (RENDER TARGET)

				sceneRenderTarget = new THREE.Scene();

				cameraOrtho = new THREE.OrthographicCamera( SCREEN_WIDTH / - 2, SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2, SCREEN_HEIGHT / - 2, -10000, 10000 );
				cameraOrtho.position.z = 100;

				sceneRenderTarget.add( cameraOrtho );

				// CAMERA

				camera = new THREE.PerspectiveCamera( 40, SCREEN_WIDTH / SCREEN_HEIGHT, 2, 4000 );
				camera.position.set( -1200, 500, 1000 );// ( -1200, 800, 1200 )

				controls = new THREE.OrbitControls( camera );
				controls.target.set( 0, 0, 0 );

				controls.enableRotate = true;
				//adding a bit of heaviness here (heft)
				controls.rotateSpeed = 0.05;
				controls.minAzimuthAngle = - Math.PI; // default
				controls.maxAzimuthAngle = Math.PI / 2;

				controls.minPolarAngle = 0; // default
				controls.maxPolarAngle = Math.PI / 3;

        //and a bit of heaviness here
				controls.zoomSpeed = 0.05;

				controls.panSpeed = 0.5;

				controls.enableKeys= true;
				controls.keys = [ 37, 38, 39 ];

				// SCENE (FINAL)

				scene = new THREE.Scene();
				scene.fog = new THREE.Fog( 0x050505, 2000, 4000 );

				// LIGHTS

				scene.add( new THREE.AmbientLight( 0x111111 ) );

				directionalLight = new THREE.DirectionalLight( 0xffffff, 1.15 );
				directionalLight.position.set( 500, 2000, 0 );
				scene.add( directionalLight );

				pointLight = new THREE.PointLight( 0xff4400, 1.5 );
				pointLight.position.set( 0, 0, 0 );
				scene.add( pointLight );


				// HEIGHT + NORMAL MAPS

				var normalShader = THREE.NormalMapShader;

				var rx = 256, ry = 256;
				// var rx = 2412, ry = 3074;
				var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat };

				heightMap  = new THREE.WebGLRenderTarget( rx, ry, pars );
				heightMap.texture.generateMipmaps = false;

				normalMap = new THREE.WebGLRenderTarget( rx, ry, pars );
				normalMap.texture.generateMipmaps = false;

				uniformsNoise = {

					time:   { value: 1.0 },
					scale:  { value: new THREE.Vector2( 1.5, 1.5 ) },
					offset: { value: new THREE.Vector2( 0, 0 ) }

				};

				uniformsNormal = THREE.UniformsUtils.clone( normalShader.uniforms );

				uniformsNormal.height.value = 0.05;
				uniformsNormal.resolution.value.set( rx, ry );
				uniformsNormal.heightMap.value = heightMap.texture;

				var vertexShader = document.getElementById( &#x27;vertexShader&#x27; ).textContent;

				// TEXTURES

				var loadingManager = new THREE.LoadingManager( function(){
					terrain.visible = true;
				});
				var textureLoader = new THREE.TextureLoader( loadingManager );

				var specularMap = new THREE.WebGLRenderTarget( 1024, 1024, pars );
				specularMap.texture.generateMipmaps = false;

				var diffuseTexture1 = textureLoader.load( &quot;./textures/difTex001.png&quot; );
				var diffuseTexture2 = textureLoader.load( &quot;./textures/difTex002.png&quot; );
				//on purpose here
				var detailTexture = textureLoader.load( &quot;textures/consenttocollectmydata.png&quot; );

				diffuseTexture1.wrapS = diffuseTexture1.wrapT = THREE.RepeatWrapping;
				diffuseTexture2.wrapS = diffuseTexture2.wrapT = THREE.RepeatWrapping;
				detailTexture.wrapS = detailTexture.wrapT = THREE.RepeatWrapping;
				specularMap.texture.wrapS = specularMap.texture.wrapT = THREE.RepeatWrapping;

				// TERRAIN SHADER

				var terrainShader = THREE.ShaderTerrain[ &quot;terrain&quot; ];

				uniformsTerrain = THREE.UniformsUtils.clone( terrainShader.uniforms );

				uniformsTerrain[ &#x27;tNormal&#x27; ].value = normalMap.texture;
				uniformsTerrain[ &#x27;uNormalScale&#x27; ].value = 3.5;

				uniformsTerrain[ &#x27;tDisplacement&#x27; ].value = heightMap.texture;

				uniformsTerrain[ &#x27;tDiffuse1&#x27; ].value = diffuseTexture1;
				uniformsTerrain[ &#x27;tDiffuse2&#x27; ].value = diffuseTexture2;
				uniformsTerrain[ &#x27;tSpecular&#x27; ].value = specularMap.texture;
				uniformsTerrain[ &#x27;tDetail&#x27; ].value = detailTexture;

				uniformsTerrain[ &#x27;enableDiffuse1&#x27; ].value = true;
				uniformsTerrain[ &#x27;enableDiffuse2&#x27; ].value = true;
				uniformsTerrain[ &#x27;enableSpecular&#x27; ].value = true;

				uniformsTerrain[ &#x27;diffuse&#x27; ].value.setHex( 0xffffff );
				uniformsTerrain[ &#x27;specular&#x27; ].value.setHex( 0xffffff );

				uniformsTerrain[ &#x27;shininess&#x27; ].value = 30;

				uniformsTerrain[ &#x27;uDisplacementScale&#x27; ].value = 375;

				uniformsTerrain[ &#x27;uRepeatOverlay&#x27; ].value.set( 6, 6 );

				var params = [
					[ &#x27;heightmap&#x27;, 	document.getElementById( &#x27;fragmentShaderNoise&#x27; ).textContent, 	vertexShader, uniformsNoise, false ],
					[ &#x27;normal&#x27;, 	normalShader.fragmentShader,  normalShader.vertexShader, uniformsNormal, false ],
					[ &#x27;terrain&#x27;, 	terrainShader.fragmentShader, terrainShader.vertexShader, uniformsTerrain, true ]
				 ];

				for( var i = 0; i &lt; params.length; i ++ ) {

					var material = new THREE.ShaderMaterial( {

						uniforms: 		params[ i ][ 3 ],
						vertexShader: 	params[ i ][ 2 ],
						fragmentShader: params[ i ][ 1 ],
						lights: 		params[ i ][ 4 ],
						fog: 			true
						} );

					mlib[ params[ i ][ 0 ] ] = material;

				}


				var plane = new THREE.PlaneBufferGeometry( SCREEN_WIDTH, SCREEN_HEIGHT );

				quadTarget = new THREE.Mesh( plane, new THREE.MeshBasicMaterial( { color: 0x000000 } ) );
				quadTarget.position.z = -500;
				sceneRenderTarget.add( quadTarget );

				// TERRAIN MESH

				var geometryTerrain = new THREE.PlaneBufferGeometry( 9000, 9000, 256, 256 );

				THREE.BufferGeometryUtils.computeTangents( geometryTerrain );

				terrain = new THREE.Mesh( geometryTerrain, mlib[ &#x27;terrain&#x27; ] );
				terrain.position.set( 0, -125, 0 );
				terrain.rotation.x = -Math.PI / 2;
				terrain.visible = false;
				scene.add( terrain );

				// RENDERER

				renderer = new THREE.WebGLRenderer();
				renderer.setClearColor( scene.fog.color );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );
				container.appendChild( renderer.domElement );


				// EVENTS

				onWindowResize();

				window.addEventListener( &#x27;resize&#x27;, onWindowResize, false );

				document.addEventListener( &#x27;keydown&#x27;, onKeyDown, false );

				if (seed &amp;&amp; page) {
					for (var i = 1; i &lt;= page - 1; i++) {
						// every time this is called, it hits our random number generator inside the getRandomInt function
						getRandomInt(1, 1000);
					}
					randomNumber = getRandomInt(1, 1000);
				}

			}
			// init end

			function getRandomInt(min, max) {
				min = Math.ceil(min);
				max = Math.floor(max);
				//call our seeded random number generator
				return Math.floor(rng() * (max - min) + min);
			}

			function onWindowResize( event ) {

				SCREEN_WIDTH = window.innerWidth;
				SCREEN_HEIGHT = window.innerHeight;

				renderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );

				camera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;
				camera.updateProjectionMatrix();

			}

			//animate with m

			function onKeyDown ( event ) {

				switch( event.keyCode ) {

					case 77: /*M*/  animDeltaDir *= -1; break;

				}

			}


						//State
						var state = {
							paused: false,
							pausedRenderer: false
						}

				var fr = 0;



			// Take Data URL of Canvas

			function takeScreenshot( width, height, seed, page ) {

			    // set camera and renderer to desired screenshot dimension
			    camera.aspect = width / height;
			    camera.updateProjectionMatrix();
			 	renderer.setSize(  width, height );


			    renderer.render( scene, camera, null, false );

			    const dataURL = renderer.domElement.toDataURL( &#x27;image/png&#x27; );

			    // save
			    saveDataURI(defaultFileName( &#x27;.png&#x27; , seed, page), dataURL);

			    // reset to old dimensions (cheat version)
			    onWindowResize();

			}

			function dataURIToBlob( dataURI ) {
				const binStr = window.atob( dataURI.split( &#x27;,&#x27; )[1] );
				const len = binStr.length;
				const arr = new Uint8Array( len );
				for ( let i = 0; i &lt; len; i++ ) {
					arr[i] = binStr.charCodeAt( i );
				}
				return new window.Blob( [arr] );
			}


			 // Save Image into system

			 function saveDataURI( name, dataURI ) {
			 	const blob = dataURIToBlob( dataURI );
			  // force download
			  const link = document.createElement( &#x27;a&#x27; );
			  link.download = name;
			  link.href = window.URL.createObjectURL( blob );
			  link.onclick = () =&gt; {
			  	window.setTimeout( () =&gt; {
			  		window.URL.revokeObjectURL( blob );
			  		link.removeAttribute( &#x27;href&#x27; );
			  	}, 500 );

			  };
			  link.click();
			}

			//return File Name

			function defaultFileName (ext, seed, page) {
				//var prng = new Math.seedrandom();
				//var randomNumber =  prng.int32();
				str = `${seed}_${page}${ext}`;
				return str;
			}


			var frame = 0;
			function animate(){
				requestAnimationFrame( animate );
				render();
				frame++;

			}


			var tookScreenshot = false;
			function render() {

				var delta = clock.getDelta();



				if ( terrain.visible ) {

					controls.update();

					var time = Date.now() * 0.001;

					var fLow = 0.1, fHigh = 0.8;

					lightVal = THREE.Math.clamp( lightVal + 0.5 * delta * lightDir, fLow, fHigh );

					var valNorm = ( lightVal - fLow ) / ( fHigh - fLow );

					scene.fog.color.setHSL( 0.1, 0.5, lightVal );

					renderer.setClearColor( scene.fog.color );

					directionalLight.intensity = THREE.Math.mapLinear( valNorm, 0, 1, 0.1, 1.15 );
					pointLight.intensity = THREE.Math.mapLinear( valNorm, 0, 1, 0.9, 1.5 );

					uniformsTerrain[ &#x27;uNormalScale&#x27; ].value = THREE.Math.mapLinear( valNorm, 0, 1, 0.6, 3.5 );

					if ( updateNoise ) {

						animDelta = THREE.Math.clamp( animDelta + 0.00075 * animDeltaDir, 0, 0.05 );
						uniformsNoise[ &#x27;time&#x27; ].value += delta * animDelta;

						if(seed &amp;&amp; page){
							if(!tookScreenshot){
								uniformsNoise[ &#x27;offset&#x27; ].value.x = randomNumber * 0.05;
								setTimeout(() =&gt; {
									takeScreenshot( PAGE_WIDTH, PAGE_HEIGHT, seed, page);
								}, 500);
								tookScreenshot = true;
							}
						}else{
							uniformsNoise[ &#x27;offset&#x27; ].value.x += delta * 0.05;
						}

						uniformsTerrain[ &#x27;uOffset&#x27; ].value.x = 4 * uniformsNoise[ &#x27;offset&#x27; ].value.x;

						quadTarget.material = mlib[ &#x27;heightmap&#x27; ];
						renderer.render( sceneRenderTarget, cameraOrtho, heightMap, true );

						quadTarget.material = mlib[ &#x27;normal&#x27; ];
						renderer.render( sceneRenderTarget, cameraOrtho, normalMap, true );

					}

					renderer.render( scene, camera );

				}

			}

		&lt;/script&gt;

	&lt;/body&gt;
&lt;/html&gt;

" title="A frame containing the piece: Greed by Maja Kalogera"></iframe><button class="fullscreen"><svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg></button></div><div class="footer open"><div class="footer-content"><a href="/about">about</a><a href="http://accessibility.mit.edu/">accessibility</a><a href="mailto:cast@mit.edu">contact</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/works/greed/view.html";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-058a0cee7fa5777b59c0.js"],"app":["/app-59a51c0d7db796975a04.js"],"component---src-pages-about-js":["/component---src-pages-about-js-2c02f0253419d1034188.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a923fb9f52975dab1dcc.js"],"component---src-templates-work-js":["/component---src-templates-work-js-e0164b3b8ade2f51e443.js"]};/*]]>*/</script><script src="/polyfill-058a0cee7fa5777b59c0.js" nomodule=""></script><script src="/component---src-templates-work-js-e0164b3b8ade2f51e443.js" async=""></script><script src="/app-59a51c0d7db796975a04.js" async=""></script><script src="/framework-62e3997f8deedb325acf.js" async=""></script><script src="/styles-9411612e31e4f14527d1.js" async=""></script><script src="/webpack-runtime-989c47feb958c7471da8.js" async=""></script></body></html>